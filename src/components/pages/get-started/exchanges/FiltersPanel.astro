---
import Column from "@/components/ui/layout/Column.astro";
import MaskIcon from "@/components/ui/icons/MaskIcon.astro";
import { icons } from "@/utils/icons";

interface Props {
  title: string;
  description: string;
  clearLabel: string;
  closeLabel: string;
  clearFilterId: string;
  mobileToggleId: string;
}

const {
  title,
  description,
  clearLabel,
  closeLabel,
  clearFilterId,
  mobileToggleId,
} = Astro.props;
---

<div class="filters-panel">
  <h2 class="filters-title">{title}</h2>
  <p class="filters-description">{description}</p>

  <Column gap="md">
    <slot />

    <div class="clear-filters">
      <label for={clearFilterId} class="clear-filters-link">
        {clearLabel}
      </label>
    </div>

    <label for={mobileToggleId} class="mobile-filter-close">
      <MaskIcon src={icons.mask("close")} size="1.25em" aria-hidden="true" />
      {closeLabel}
    </label>
  </Column>
</div>

<style>
  /* Mobile: bottom sheet behavior */
  .filters-panel {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    padding: var(--space-2xl) var(--space-2xl) var(--space-md);
    background: var(--card-color);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    max-height: 75vh;
    overflow-y: auto;
    z-index: var(--z-dropdown);
    transform: translateY(100%);
    transition:
      transform 0.25s ease-out,
      visibility 0.25s ease-out;
    visibility: hidden;
  }

  .filters-title {
    margin: 0;
    color: var(--heading-color);
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
  }

  .filters-description {
    color: var(--paragraph-subtitle);
    font-size: var(--font-size-md);
    margin: 0.75rem 0 var(--space-2xl);
  }

  .clear-filters {
    text-align: end;
  }

  .clear-filters-link {
    color: var(--text-secondary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    cursor: pointer;

    &:hover {
      text-decoration: underline;
    }
  }

  .mobile-filter-close {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-xs);
    padding: 0.65rem var(--space-md);
    border-radius: var(--radius-full);
    background: var(--card-color);
    border: 1px solid var(--border-color);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--heading-color);
    cursor: pointer;
  }

  /* Desktop: regular panel (SidebarLayout handles positioning) */
  @media (width >= 1200px) {
    .filters-panel {
      position: static;
      transform: none;
      transition: none;
      max-height: none;
      overflow-y: visible;
      visibility: visible;
      z-index: auto;
      padding: var(--space-2xl);
      border-radius: var(--radius-md);
    }

    .mobile-filter-close {
      display: none;
    }
  }
</style>
