---
import "@/styles/moneropedia-link.css";
import {
  getMoneropediaEntries,
  processMoneropediaLinks,
} from "@/utils/moneropedia";
import DOMPurify from "isomorphic-dompurify";

interface Props {
  locale: string;
}

const { locale } = Astro.props as Props;

const entries = await getMoneropediaEntries(locale);

// Get slot content and process it
let processedHtml = await Astro.slots.render("default");
processedHtml = processMoneropediaLinks(processedHtml, entries, locale);
---

<div class="moneropedia-content" set:html={DOMPurify.sanitize(processedHtml)} />

<style lang="scss">
  .moneropedia-content {
    position: relative;
    line-height: var(--line-height-body);

    @media (prefers-color-scheme: dark) {
      color: var(---paragraph-main);

      a {
        color: var(---paragraph-main);

        &:hover {
          color: var(--heading-color);
        }
      }
    }
  }
</style>
