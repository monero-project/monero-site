---
import arrowRightIcon from "@/assets/icons/mask/arrow-right.avif";
import MaskIcon from "@/components/ui/MaskIcon.astro";
import { getDirection, getLocale } from "@/i18n/utils";

interface Props {
  code?: string;
  title: string;
  abstract: string;
  url: string;
  note?: string;
  rtl?: boolean;
}

const { code, title, abstract, url, note } = Astro.props;
const dir = getDirection(getLocale(Astro.url));
---

<article class="paper-card">
  <div class="paper-header">
    {code && <span class="paper-code">{code}</span>}
    {note && <span class="paper-badge">{note}</span>}
  </div>
  <h3 class="paper-title">{title}</h3>
  <p class="paper-abstract">{abstract}</p>
  <a href={url} target="_blank" rel="noopener noreferrer" class="paper-link">
    Read Paper
    <MaskIcon src={arrowRightIcon} size="1em" rtl={dir === "rtl"} />
  </a>
</article>

<style>
  .paper-card {
    background: var(--card-color);
    border-radius: 0.5rem;
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .paper-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
  }

  .paper-code {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    color: var(--monero-orange);
    font-family: var(--font-mono, monospace);
    background: color-mix(in srgb, var(--monero-orange) 12%, transparent);
    padding: 0.2em 0.5em;
    border-radius: 0.25rem;
  }

  .paper-badge {
    font-size: var(--font-size-xs);
    color: var(--paragraph-subtitle);
    font-style: italic;
  }

  .paper-title {
    margin: 0;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--heading-color);
    line-height: 1.35;
  }

  .paper-abstract {
    margin: 0;
    font-size: var(--font-size-sm);
    color: var(--paragraph-subtitle);
    line-height: var(--line-height-body);
    overflow: hidden;
    max-width: 65ch;
  }

  .paper-link {
    display: inline-flex;
    align-items: center;
    gap: 0.35em;
    margin-top: 0.25rem;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--monero-orange);
    width: fit-content;
  }

  .paper-link::after {
    display: none;
  }

  @media (max-width: 600px) {
    .paper-card {
      padding: 1rem;
    }

    .paper-title {
      font-size: var(--font-size-sm);
    }
  }
</style>
