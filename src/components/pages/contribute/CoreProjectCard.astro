---
import MaskIcon from "@/components/ui/MaskIcon.astro";
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description: string;
  tags: string[];
  link: string;
  linkText?: string;
  icon: ImageMetadata;
}

const { title, description, tags, link, linkText, icon } = Astro.props;
---

<div class="core-project-card">
  <header class="card-header" aria-label="Project">
    <div class="card-icon" aria-hidden="true">
      <MaskIcon src={icon} size="1.5em" />
    </div>
    <h4 class="card-title">{title}</h4>
  </header>

  <div class="card-description">
    <p class="card-description-text">{description}</p>

    <div class="card-tags" aria-label="Languages">
      <ul class="list">
        {
          tags.map((tag) => (
            <li class="pill">
              <span class="tag-text">{tag}</span>
            </li>
          ))
        }
      </ul>
    </div>
  </div>

  <a
    href={link}
    class="visit-link"
    target="_blank"
    rel="noopener noreferrer external"
    set:text={linkText ?? "View on GitHub"}
  />
</div>

<style>
  .core-project-card {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    background: var(--card-color);
    border-radius: 0.5rem;
    padding: 1rem;
    transition: background 0.3s ease;
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .card-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    flex-shrink: 0;
    border-radius: 0.5rem;
    background: var(--card-hover-color);
    color: var(--monero-orange);
  }

  .card-title {
    margin: 0;
    line-height: 1;
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: var(--heading-color);
  }

  .card-description {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    height: 100%;
  }

  .card-description-text {
    margin: 0;
    font-size: var(--font-size-sm);
    color: var(--paragraph-main);
  }

  .list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .pill {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.25rem 0.5rem;
    border-radius: 999px;
    background: var(--card-hover-color);
    font-size: var(--font-size-sm);
    color: var(--paragraph-main);
    line-height: 1;
  }

  .tag-text {
    letter-spacing: 0.01em;
  }

  .visit-link {
    display: inline-flex;
    align-items: center;
    margin-top: 0.25rem;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--monero-orange);
    text-decoration: none;
  }

  .visit-link:hover {
    text-decoration: underline;
  }
</style>
