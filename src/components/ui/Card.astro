---
import type { HTMLTag } from "astro/types";

type Padding = "none" | "xs" | "sm" | "md" | "lg" | "xl" | "2xl";
type Radius = "none" | "sm" | "md" | "lg" | "xl";

interface Props {
  padding?: Padding;
  radius?: Radius;
  border?: boolean;
  hover?: boolean;
  transparent?: boolean;
  as?: HTMLTag;
  class?: string;
  [key: string]: unknown;
}

const {
  padding = "xl",
  radius = "md",
  border = false,
  hover = false,
  transparent = false,
  as: Tag = "div",
  class: className,
  ...rest
}: Props = Astro.props;

const cardPadding = padding === "none" ? "0" : `var(--space-${padding})`;
const cardRadius = radius === "none" ? "0" : `var(--radius-${radius})`;
---

<Tag
  class:list={["card", className]}
  data-border={border || undefined}
  data-hover={hover || undefined}
  data-transparent={transparent || undefined}
  {...rest}
>
  <slot />
</Tag>

<style define:vars={{ "card-padding": cardPadding, "card-radius": cardRadius }}>
  .card {
    background: var(--card-color);
    padding: var(--card-padding);
    border-radius: var(--card-radius);
    overflow: hidden;
  }
  .card[data-border] {
    border: 1px solid var(--border-color);
  }
  .card[data-transparent] {
    background: transparent;
  }
  .card[data-hover] {
    transition: background 0.15s ease;
  }
  .card[data-hover]:hover,
  .card[data-hover]:focus-within {
    background: var(--card-hover-color);
  }
</style>
