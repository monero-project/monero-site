---
import type { HTMLTag } from "astro/types";

interface Props {
  title?: string;
  subtitle?: string;
  headingLevel?: number;
  anchorId?: string;
  ariaLabel?: string;
  centered?: boolean;
  class?: string;
}

const {
  title,
  subtitle,
  headingLevel = 2,
  anchorId,
  ariaLabel,
  centered = false,
  class: className,
  ...rest
} = Astro.props;

const Heading = `h${headingLevel}` as HTMLTag;
const hasHeader = Boolean(title || subtitle);
const ariaLabelledBy = ariaLabel ? undefined : anchorId;
---

<section
  class:list={["section", className]}
  aria-label={ariaLabel}
  aria-labelledby={ariaLabelledBy}
  data-centered={centered || undefined}
  {...rest}
>
  {
    hasHeader && (
      <header class="header">
        {title && (
          <Heading id={anchorId} class="title">
            {title}
          </Heading>
        )}
        {subtitle && <p class="subtitle">{subtitle}</p>}
      </header>
    )
  }
  <slot />
</section>

<style>
  .header {
    margin-bottom: var(--space-xl);

    .section[data-centered] & {
      text-align: center;
    }
  }

  .title {
    font-size: var(--font-size-2xl);
    color: var(--heading-color);
    margin: 0;
    scroll-margin-top: 6.5rem;
    letter-spacing: -0.01em;
  }

  .subtitle {
    margin: var(--space-xs) 0 0;
    color: var(--paragraph-subtitle);
    max-width: 80ch;

    .section[data-centered] & {
      margin-inline: auto;
    }
  }

  @media screen and (width >= 1200px) {
    .title {
      scroll-margin-top: var(--space-2xl);
    }
  }
</style>
