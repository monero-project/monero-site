---
interface Props {
  maxWidth?: string;
  centered?: boolean;
  class?: string;
}

const {
  maxWidth = "100%",
  centered = false,
  class: className,
  ...rest
} = Astro.props;

const style = `--video-max-width: ${maxWidth}`;

const classes = ["video-container", className].filter(Boolean).join(" ");
---

<div class={classes} style={style} {...rest} data-centered={centered}>
  <slot />
</div>

<style>
  .video-container {
    position: relative;
    width: min(100%, var(--video-max-width, 100%));
    aspect-ratio: 16 / 9;
    border-radius: var(--radius-xl);
    border: 1px solid var(--border-color);
    overflow: hidden;

    &[data-centered] {
      margin-inline: auto;
    }

    & :global(video) {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
  }
</style>
