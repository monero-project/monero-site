---
import type { HTMLTag } from "astro/types";

interface Props {
  title?: string;
  subtitle?: string;
  headingLevel?: number;
  anchorId?: string;
  ariaLabel?: string;
  centered?: boolean;
  class?: string;
}

const {
  title,
  subtitle,
  headingLevel = 2,
  anchorId,
  ariaLabel,
  centered = false,
  class: className,
  ...rest
} = Astro.props;

const Heading = `h${headingLevel}` as HTMLTag;
const hasHeader = Boolean(title || subtitle);
const classes = [className, centered && "centered"].filter(Boolean).join(" ");
const ariaLabelledBy = ariaLabel ? undefined : anchorId;
---

<section
  class={classes}
  aria-label={ariaLabel}
  aria-labelledby={ariaLabelledBy}
  {...rest}
>
  {
    hasHeader && (
      <header class="page-section__header">
        {title && (
          <Heading id={anchorId} class="page-section__title">
            {title}
          </Heading>
        )}
        {subtitle && <p class="page-section__subtitle">{subtitle}</p>}
      </header>
    )
  }
  <slot />
</section>

<style>
  section.centered .page-section__header {
    text-align: center;
  }

  section.centered .page-section__subtitle {
    margin-inline: auto;
  }

  .page-section__header {
    margin-bottom: 1.5rem;
  }

  .page-section__title {
    font-size: var(--font-size-2xl);
    color: var(--heading-color);
    margin: 0;
    scroll-margin-top: 6.5rem;
    letter-spacing: -0.01em;
  }

  .page-section__subtitle {
    margin: 0.5rem 0 0;
    color: var(--paragraph-subtitle);
    max-width: 80ch;
  }

  @media screen and (min-width: 1200px) {
    .page-section__title {
      scroll-margin-top: 2rem;
    }
  }
</style>
