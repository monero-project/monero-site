---
import Button from "@/components/ui/Button.astro";
import Row from "@/components/ui/Row.astro";
import ExternalResourceButton from "@/components/ui/ExternalResourceButton.astro";
import Grid from "@/components/ui/Grid.astro";
import IconLink from "@/components/ui/IconLink.astro";
import PageContainer from "@/components/ui/PageContainer.astro";
import PageSection from "@/components/ui/PageSection.astro";
import Column from "@/components/ui/Column.astro";
import TitleCard from "@/components/ui/TitleCard.astro";
import TOCContainer from "@/components/ui/TOCContainer.astro";
import Layout from "@/layouts/Layout.astro";

import BrandAssetCard from "@/components/pages/press-kit/BrandAssetCard.astro";
import ContactCard from "@/components/pages/press-kit/ContactCard.astro";

import bookTextIcon from "@/assets/icons/mask/bookText.avif";
import componentIcon from "@/assets/icons/mask/component.avif";
import usersIcon from "@/assets/icons/mask/users.avif";

import {
  brandAssets,
  marketingResources,
  pressDocuments,
} from "@/data/press-kit";
import { getPublicImageDimensions } from "@/utils/image";

const { t, localizeHref } = Astro.locals;
const previewDimensions = await Promise.all(
  brandAssets.map((asset) => getPublicImageDimensions(asset.preview)),
);

const sections = [
  {
    id: "brand-assets",
    icon: componentIcon,
    title: t("press-kit:sections.brandAssets.title"),
    subtitle: t("press-kit:sections.brandAssets.tocSubtitle"),
  },
  {
    id: "press-materials",
    icon: bookTextIcon,
    title: t("press-kit:sections.pressMaterials.title"),
    subtitle: t("press-kit:sections.pressMaterials.tocSubtitle"),
  },
  {
    id: "contacts",
    icon: usersIcon,
    title: t("press-kit:sections.contacts.title"),
    subtitle: t("press-kit:sections.contacts.tocSubtitle"),
  },
];
---

<Layout
  title={t("press-kit:pageTitle")}
  description={t("press-kit:description")}
>
  <TitleCard title={t("press-kit:title")} subtitle={t("press-kit:subtitle")} />

  <PageContainer>
    <TOCContainer
      sections={sections}
      ariaLabel={t("press-kit:aria.sectionsNav")}
    />

    <PageSection
      title={t("press-kit:sections.brandAssets.title")}
      subtitle={t("press-kit:sections.brandAssets.intro")}
      anchorId="brand-assets"
    >
      <Grid minWidth="22rem" gap="xl" class="assets-grid">
        {
          brandAssets.map((asset, i) => (
            <BrandAssetCard
              asset={asset}
              previewWidth={previewDimensions[i].width}
              previewHeight={previewDimensions[i].height}
            />
          ))
        }
      </Grid>

      <Row justify="end" class="download-all">
        <Button href="/media/press-kit/monero-press-kit.zip" variant="primary">
          {t("press-kit:sections.brandAssets.downloadAll")}
        </Button>
      </Row>
    </PageSection>

    <hr aria-hidden="true" />

    <PageSection
      title={t("press-kit:sections.pressMaterials.title")}
      anchorId="press-materials"
    >
      <Grid columns={2} gap="2xl">
        <Column gap="md">
          <h3 class="column-title">
            {t("press-kit:sections.pressMaterials.pressDocumentation")}
          </h3>
          <Column gap="sm">
            {
              pressDocuments.map((doc) => (
                <ExternalResourceButton
                  href={doc.url}
                  title={t(`press-kit:documents.${doc.id}.title`)}
                  subtitle={t(`press-kit:documents.${doc.id}.description`)}
                />
              ))
            }
          </Column>
        </Column>

        <Column gap="md">
          <h3 class="column-title">
            {t("press-kit:sections.pressMaterials.marketingMaterials")}
          </h3>
          <Column gap="sm">
            {
              marketingResources.map((resource) => (
                <ExternalResourceButton
                  href={resource.url}
                  title={t(`press-kit:marketing.${resource.id}.title`)}
                  subtitle={t(`press-kit:marketing.${resource.id}.description`)}
                />
              ))
            }
          </Column>
        </Column>
      </Grid>
    </PageSection>

    <hr aria-hidden="true" />

    <PageSection
      title={t("press-kit:sections.contacts.title")}
      anchorId="contacts"
    >
      <Grid minWidth="18rem" gap="md">
        <ContactCard
          title={t("press-kit:sections.contacts.pressInquiries.title")}
          description={t(
            "press-kit:sections.contacts.pressInquiries.description",
          )}
        >
          <a href="mailto:press@getmonero.org">press@getmonero.org</a>
        </ContactCard>
        <ContactCard
          title={t("press-kit:sections.contacts.workgroups.title")}
          description={t("press-kit:sections.contacts.workgroups.description")}
        >
          <IconLink href={localizeHref("/community/workgroups")}>
            {t("press-kit:sections.contacts.workgroups.link")}
          </IconLink>
        </ContactCard>
        <ContactCard
          title={t("press-kit:sections.contacts.community.title")}
          description={t("press-kit:sections.contacts.community.description")}
        >
          <IconLink href={localizeHref("/community/hangouts")}>
            {t("press-kit:sections.contacts.community.link")}
          </IconLink>
        </ContactCard>
      </Grid>
    </PageSection>
  </PageContainer>
</Layout>

<style>
  .column-title {
    margin: 0;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.02em;
    color: var(--paragraph-main);
  }

  .section-intro {
    color: var(--paragraph-subtitle);
    margin: 0 0 var(--space-xl);
    max-width: 70ch;
  }

  .download-all {
    margin-top: var(--space-2xl);
  }

  .assets-grid {
    margin-bottom: var(--space-2xl);
  }
</style>
