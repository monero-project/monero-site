---
import IRCChannelButton from "@/components/pages/community/hangouts/IRCChannelButton.astro";
import ExternalResourceButton from "@/components/ui/ExternalResourceButton.astro";
import Grid from "@/components/ui/layout/Grid.astro";
import InternalResourceButton from "@/components/ui/InternalResourceButton.astro";
import PageContainer from "@/components/ui/layout/PageContainer.astro";
import PageSection from "@/components/ui/layout/PageSection.astro";
import Column from "@/components/ui/layout/Column.astro";
import TitleCard from "@/components/ui/TitleCard.astro";
import Layout from "@/layouts/Layout.astro";

import { channels, chatLinks, socialLinks } from "@/data/community/hangouts";
import { icons } from "@/utils/icons";

const { t, localizeHref } = Astro.locals;
---

<Layout title={t("hangouts:pageTitle")} description={t("hangouts:description")}>
  <TitleCard
    title={t("hangouts:hero.title")}
    subtitle={t("hangouts:hero.subtitle")}
  />
  <PageContainer>
    <InternalResourceButton
      icon={icons.mask("users")}
      title={t("hangouts:workgroupsNote.title")}
      href={localizeHref("/community/workgroups")}
    >
      {t("hangouts:workgroupsNote.content")}
    </InternalResourceButton>

    <Grid columns={2} gap="2xl" class="hangouts-grid">
      <PageSection title={t("hangouts:chat.title")} headingLevel={2}>
        <Column as="ul" gap="sm">
          {
            chatLinks.map((link) => (
              <li>
                <ExternalResourceButton
                  href={link.href}
                  title={t(link.titleKey)}
                  subtitle={link.subtitleKey ? t(link.subtitleKey) : undefined}
                  logo={link.logo}
                />
              </li>
            ))
          }
        </Column>
      </PageSection>

      <PageSection title={t("hangouts:social.title")} headingLevel={2}>
        <Column as="ul" gap="sm">
          {
            socialLinks.map((link) => (
              <li>
                <ExternalResourceButton
                  href={link.href}
                  title={t(link.titleKey)}
                  subtitle={link.subtitleKey ? t(link.subtitleKey) : undefined}
                  logo={link.logo}
                />
              </li>
            ))
          }
        </Column>
      </PageSection>
    </Grid>

    <hr aria-hidden="true" />

    <PageSection title={t("hangouts:channels.title")}>
      <Grid as="ul" columns={2} gap="sm">
        {
          channels.map((ch) => (
            <li>
              <IRCChannelButton
                name={ch.name}
                description={t(ch.descriptionKey)}
                href={ch.href}
                matrixHref={ch.matrixHref}
              />
            </li>
          ))
        }
      </Grid>
    </PageSection>
  </PageContainer>
</Layout>

<style>
  .hangouts-grid {
    margin-top: var(--space-2xl);
  }
</style>
