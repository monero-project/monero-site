---
import Layout from "@/layouts/Layout.astro";
import TitleCard from "../components/ui/TitleCard.astro";
import Tabs from "../components/ui/Tabs.astro";
import CommunityCard from "../components/pages/downloads/CommunityCard.astro";
import CoreCard from "../components/pages/downloads/CoreCard.astro";
import downloadsData from "../data/downloads.json";
import type { DownloadLink } from "../components/pages/downloads/CoreCard.astro";
---

<Layout>
  <TitleCard title="Downloads" subtitle="Get Monero wallets and software." />
  <Tabs labels={["Core", "Community"]} initial={0} id="download-tabs">
    <Fragment slot="panel-0" id="core-tab">
      <div class="downloads-grid">
        <!-- Monero GUI Card -->
        <CoreCard
          image="/media/gui.png"
          imageAlt="Monero GUI Wallet"
          title="Monero GUI Wallet"
          subtitle="Graphical wallet developed by the Monero community"
          version={downloadsData.gui.version}
          releaseNotesUrl=`https://github.com/monero-project/monero-gui/releases/tag/${downloadsData.gui.version}`
          sourceCodeUrl="https://github.com/monero-project/monero-gui"
          features={[
            "<b>Simple mode</b> for beginners to easily send and receive XMR",
            "<b>Advanced mode</b> with full control over wallet and node",
            "<b>Merchant page</b> for easily accepting XMR payments",
            "Compatible with <b>Trezor</b> and <b>Ledger</b> hardware wallets",
            "<b>In-app fiat conversion</b>",
            "<b>Blockchain pruning</b> to save disk space",
            "Available in <b>30+ languages</b>",
          ]}
          downloads={downloadsData.gui.downloads as DownloadLink[]}
        />

        <!-- Monero CLI Card -->
        <CoreCard
          image="/media/cli.png"
          imageAlt="Monero CLI Tools"
          title="Monero CLI Tools"
          subtitle="Command-line interface for advanced users"
          version={downloadsData.cli.version}
          releaseNotesUrl=`https://github.com/monero-project/monero/releases/tag/${downloadsData.cli.version}`
          sourceCodeUrl="https://github.com/monero-project/monero"
          features={[
            "Choose between local or remote node for blockchain access",
            "Send transactions over Tor or I2P for extra privacy",
            "Use bootstrap node for immediate access while syncing locally",
            "Compatible with Trezor and Ledger hardware wallets",
            "Includes RPC wallet, ZMQ interface and daemon",
            "Blockchain pruning saves disk space",
          ]}
          downloads={downloadsData.cli.downloads as DownloadLink[]}
        />
      </div>
    </Fragment>

    <Fragment slot="panel-1" id="community-tab">
      <div class="community-section">
        <h2 class="section-title">Local Wallets</h2>
        <p class="section-subtitle">
          Wallets that scan the blockchain locally on your device for maximum
          privacy.
        </p>

        <!-- Monero-only -->
        <h3 class="subheading">Monero-only</h3>
        <div class="cards-grid compact">
          <CommunityCard
            logo="/media/anonero.png"
            name="Anonero"
            description="Privacy-focused wallet with all communications over Tor."
            tags={{
              mobile: ["android"],
              general: ["GPL-3.0", "QR Signing"],
            }}
            link="https://anonero.io"
            linkText="Learn more"
          />
          <CommunityCard
            logo="/media/feather.png"
            name="Feather Wallet"
            description="A lightweight, fast, and feature-rich Monero desktop wallet."
            tags={{
              desktop: ["windows", "macos", "linux"],
              general: ["BSD-3", "QR Signing"],
            }}
            link="https://featherwallet.org"
          />
          <CommunityCard
            logo="/media/monerocom.jpg"
            name="Monero.com"
            description="A Monero-only wallet developed by Cake Labs."
            tags={{
              mobile: ["android", "ios"],
              desktop: ["windows", "linux"],
              general: ["MIT", "QR Signing", "Built-in exchange"],
            }}
            link="https://monero.com"
          />
          <CommunityCard
            logo="/media/monerujo.png"
            name="Monerujo"
            description="A Monero wallet for Android with advanced features."
            tags={{
              mobile: ["android"],
              general: ["Apache 2.0", "Built-in exchange"],
            }}
            link="https://monerujo.io"
          />
          <CommunityCard
            logo="/media/monfluo.png"
            name="Monfluo"
            description="A pure Monero wallet for Android."
            tags={{ mobile: ["android"], general: ["GPL-3.0"] }}
            link="https://codeberg.org/acx/monfluo/releases"
          />
        </div>

        <!-- Multi-coin -->
        <h3 class="subheading">Multi-coin</h3>
        <div class="cards-grid compact">
          <CommunityCard
            logo="/media/cakewallet.png"
            name="Cake Wallet"
            description="A multi-coin wallet with Monero and hardware wallet support."
            tags={{
              desktop: ["windows", "macos", "linux"],
              mobile: ["android", "ios"],
              general: ["GPL-3.0", "Built-in exchange"],
            }}
            link="https://cakewallet.com"
          />
          <CommunityCard
            logo="/media/eigenwallet.png"
            name="Eigenwallet"
            description="Monero and Bitcoin wallet with built-in atomic swap capabilities."
            tags={{
              desktop: ["windows", "macos", "linux"],
              general: ["GPL-3.0", "Built-in exchange"],
            }}
            link="https://eigenwallet.org"
          />
          <CommunityCard
            logo="/media/stack-wallet.webp"
            name="Stack Wallet"
            description="A multi-coin wallet with Monero support for desktop and mobile."
            tags={{
              desktop: ["windows", "macos", "linux"],
              mobile: ["android", "ios"],
              general: ["GPL-3.0", "Built-in exchange"],
            }}
            link="https://stackwallet.com"
          />
          <CommunityCard
            logo="/media/unstoppable.png"
            name="Unstoppable Wallet"
            description="A multi-coin wallet supporting Monero."
            tags={{ mobile: ["android", "ios"], general: ["MIT"] }}
            link="https://unstoppable.money"
          />
        </div>

        <h2 class="section-title">Remote Sync Wallets</h2>
        <p class="section-subtitle">
          Wallets that use remote servers to scan the blockchain for
          convenience. Requires sharing your private view key with the service.
        </p>
        <div class="cards-grid">
          <CommunityCard
            logo="/media/edge.png"
            name="Edge Wallet"
            description="A multi-coin wallet with server-side syncing."
            tags={{
              mobile: ["android", "ios"],
              general: ["BSD-3", "Remote scanning", "Built-in exchange"],
            }}
            link="https://edge.app/monero-wallet/"
          />
        </div>

        <h2 class="section-title">Offline Wallets</h2>
        <p class="section-subtitle">
          Hardware wallets and offline transaction signing apps.
        </p>
        <div class="cards-grid">
          <CommunityCard
            logo="/media/keystone.jpg"
            name="Keystone"
            tags={{ general: ["3 Pro"] }}
            description="Hardware wallet with Monero support via third-party apps."
            link="https://guide.keyst.one/docs/feather"
            linkText="Learn more"
          />
          <CommunityCard
            logo="/media/ledger.jpg"
            name="Ledger"
            tags={{ general: ["Nano S", "Nano X", "Flex", "Stax"] }}
            description="Hardware wallet with Monero support via third-party apps."
            link="https://support.ledger.com/article/360006352934-zd"
            linkText="Learn more"
          />
          <CommunityCard
            logo="/media/trezor.png"
            name="Trezor"
            description="Hardware wallet with Monero support via third-party apps."
            tags={{ general: ["Model T", "Safe 3", "Safe 5", "Safe 7"] }}
            link="https://trezor.io/coins/wallet/monero"
            linkText="Learn more"
          />
          <CommunityCard
            logo="/media/cupcake.png"
            name="Cupcake"
            description="Offline signer app for use with Cake Wallet/Monero.com."
            tags={{ general: ["DIY"], mobile: ["android", "ios"] }}
            link="https://docs.cakewallet.com/cupcake/"
            linkText="Learn more"
          />
          <CommunityCard
            logo="/media/sidekick.png"
            name="Sidekick"
            description="Offline signer app for use with Monerujo. Connects via Bluetooth."
            tags={{ general: ["DIY"], mobile: ["android"] }}
            link="https://sidekick.monerujo.app/"
            linkText="Learn more"
          />
        </div>

        <h2 class="section-title">Node Software</h2>
        <p class="section-subtitle">Alternative Monero node implementations.</p>
        <div class="cards-grid">
          <CommunityCard
            logo="/media/cuprate.png"
            name="Cuprate"
            description="A fast and efficient Monero node implementation written in Rust."
            tags={{
              desktop: ["windows", "macos", "linux"],
              general: ["MIT", "AGPL-3.0", "Alpha software"],
            }}
            link="https://github.com/Cuprate/cuprate"
          />
        </div>
      </div>
    </Fragment>
  </Tabs>
</Layout>

<style>
  /* Core downloads */
  .downloads-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.25rem;
    margin: 2rem 0;
  }

  @media (min-width: 1024px) {
    .downloads-grid {
      gap: 3rem;
    }
  }
</style>

<style>
  /* Community */
  .community-section {
    margin: 2rem 0;
  }

  .section-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--heading-color);
    margin: 2rem 0 1rem 0;
  }

  .section-subtitle {
    font-size: var(--font-size-sm);
    color: var(--paragraph-subtitle);
    line-height: var(--line-height-body);
  }

  /* Compact h3 subheadings */
  .subheading {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--heading-color);
    margin: 1.25rem 0 0.25rem 0;
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));
    gap: 1.25rem;
    padding: 1rem 0;
  }

  /* Tighter layout for sub-groups */
  .cards-grid.compact {
    grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
    padding: 0.5rem 0 1rem 0;
  }

  @media (max-width: 900px) {
    .cards-grid,
    .cards-grid.compact {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
  }
</style>
